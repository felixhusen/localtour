<form autocomplete="off" #createTourModal="ngForm" (ngSubmit)="save()">
  <h1 mat-dialog-title>{{title}}</h1>
  <mat-dialog-content style="width:500px;">
    <mat-tab-group>
      <mat-tab label="Tour Details">
        <br />
        <div class="row-fluid">
          <div class="col-12">
            <mat-form-field appearance="fill">
              <mat-label>Name</mat-label>
              <input matInput name="Name" placeholder="Name" [(ngModel)]="tour.tour.name" required minlength="2"
                maxlength="32" />
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Price</mat-label>
              <input matInput name="Price" type="number" placeholder="Price" [(ngModel)]="tour.tour.price" required maxlength="32" />
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Description</mat-label>
              <textarea matInput placeholder="Description" name="Description" [(ngModel)]="tour.tour.description"
                required></textarea>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>Start Date</mat-label>
              <input matInput name="StartDate" placeholder="Start Date" [(ngModel)]="tour.tour.startDate" required
                maxlength="32" [matDatepicker]="startDatePicker" />
              <mat-datepicker-toggle matSuffix [for]="startDatePicker"></mat-datepicker-toggle>
              <mat-datepicker #startDatePicker></mat-datepicker>
            </mat-form-field>
            <mat-form-field appearance="fill">
              <mat-label>End Date</mat-label>
              <input matInput name="EndDate" placeholder="End Date" [(ngModel)]="tour.tour.endDate" required
                maxlength="32" [matDatepicker]="endDatePicker" />
              <mat-datepicker-toggle matSuffix [for]="endDatePicker"></mat-datepicker-toggle>
              <mat-datepicker #endDatePicker></mat-datepicker>
            </mat-form-field>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Pictures">
        <br />
        <div class="row-fluid">
          <input #imageUpload style="display: none !important;" type="file" onclick="this.value=null" (change)="uploadTourPicture($event)"
            accept=".jpg,.png,.jpeg" />
          <button mat-flat-button color="primary" (click)="imageUpload.click()" type="button" class="mb-3">Upload Image</button>
          <div class="row">
            <div class="col-xs-12 col-sm-6 mb-3" *ngFor="let tourPicture of tour.tourPictures; let i = index;">
              <mat-card>
                <img mat-card-image [src]="tourPicture.link" alt="{{tour.tour.name}}-{{i}}" class="tour-image">
                <mat-card-actions>
                  <button mat-icon-button color="accent" aria-label="Delete image" (click)="deleteTourPicture(tourPicture.id)" type="button">
                    <mat-icon>delete</mat-icon>
                  </button>
                </mat-card-actions>
              </mat-card>
            </div>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </mat-dialog-content>
  <div mat-dialog-actions align="end">
    <button mat-button type="button" [disabled]="saving" (click)="close(false)">
      {{ "Cancel" | localize }}
    </button>
    <button mat-flat-button type="button" flex="15" color="accent" (click)="deleteTour()" *ngIf="_id">
      {{ "Delete" | localize }}
    </button>
    <button mat-flat-button type="submit" flex="15" color="primary" [disabled]="!createTourModal.form.valid || saving">
      {{ "Save" | localize }}
    </button>
  </div>
</form>
