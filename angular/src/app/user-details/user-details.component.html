<div [@routerTransition]>

    <mat-card>
        <h2>Your Account</h2>
        <h4>Username</h4>
        <div class="row">
            <div class="col-xs-12 col-sm-2" *ngIf="editing">
                <mat-form-field appearance="fill">
                    <mat-label>Your username</mat-label>
                    <input matInput [(ngModel)]="username" value="{{username}}">
                </mat-form-field>
            </div>
        </div>
        <p *ngIf="!editing">{{username}}</p>

            <h4>Full name</h4>
        <div class="row" *ngIf="editing">
            <div class="col-xs-12 col-sm-2">
                <mat-form-field appearance="fill">
                    <mat-label>Your first name</mat-label>
                    <input matInput [(ngModel)]="firstName" value="{{firstName}}">
                </mat-form-field>
            </div>
        </div>
        <div class="row" *ngIf="editing">
            <div class="col-xs-12 col-sm-2">
                <mat-form-field appearance="fill">
                    <mat-label>Your surname</mat-label>
                    <input matInput [(ngModel)]="lastName" value="{{lastName}}">
                </mat-form-field>
            </div>
        </div>
        <p *ngIf="!editing">{{firstName}} {{lastName}}</p>

        <h4>Email Address</h4>
        <div class="row" *ngIf="editing">
            <div class="col-xs-12 col-sm-2">
                <mat-form-field appearance="fill">
                    <mat-label>Your email address</mat-label>
                    <input matInput [(ngModel)]="email" type="email" value="{{email}}">
                </mat-form-field>
            </div>
        </div>
        <p *ngIf="!editing">{{email}}</p>

        <button mat-flat-button color="primary" *ngIf="editing" [disabled]="!username || !firstName || !lastName || !email" (click)="save()">Save Changes</button>
        <button mat-flat-button color="primary" *ngIf="!editing" (click)="editing = true;">Edit Account</button>
    </mat-card>

    <mat-card>
        <h3>My Bookings</h3>

        <p-table [value]="bookings" styleClass="ui-table-customers">
            <ng-template pTemplate="header">
                <tr>
                    <th>Booking Number</th>
                    <th>Tour</th>
                    <th>Name</th>
                    <th>Phone Number</th>
                    <th>Number of People</th>
                    <th>Status</th>
                    <th class="text-right">Total Price</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item>
                <tr>
                    <td>
                        <button mat-flat-button color="primary">{{item.booking.id}}</button>
                    </td>
                    <td>{{item.tourName}}</td>
                    <td>{{item.booking.name}}</td>
                    <td>{{item.booking.phoneNumber}}</td>
                    <td>{{item.booking.numberOfPeople}} person(s)</td>
                    <td>{{item.booking.status}}</td>
                    <td class="text-right">{{item.booking.totalPrice | currency}}</td>
                </tr>
            </ng-template>
        </p-table>
    </mat-card>
</div>
